@namespace Components.Layout
@inject AppState appState
@inject IAuthService AuthService
@inherits StatefulComponent

<MatNavMenu>
    <MatNavItem>
        @appState.Language
    </MatNavItem>
    <MatNavItem>
        <NavLink href="" Match="NavLinkMatch.All">
            <MatIcon>@MatIconNames.Home</MatIcon> Home
        </NavLink>
    </MatNavItem>
    <MatNavItem>
        <NavLink href="/about">
            <MatIcon>@MatIconNames.Feedback</MatIcon> About
        </NavLink>
    </MatNavItem>

    <MatNavItem>
        <AuthorizeView>
            <NotAuthorized>
                <NavLink href="/auth/sign-in">
                    <MatIcon>@MatIconNames.Favorite</MatIcon> Sign In
                </NavLink>
            </NotAuthorized>
            <Authorized>
                <NavLink @onclick="SignOut">
                    <MatIcon>@MatIconNames.Favorite</MatIcon> Sign Out
                </NavLink>
            </Authorized>
        </AuthorizeView>
    </MatNavItem>
</MatNavMenu>

@code{

    protected override void OnInitialized()
    {
        Observe(appState);
    }

    void SignOut()
    {
        AuthService.SignOut();
    }
}